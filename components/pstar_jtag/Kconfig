# components/pstar_jtag/Kconfig

menu "Project Star: JTAG Configuration"

    config PSTAR_KCONFIG_JTAG_ENABLED
        bool "Enable JTAG Support"
        default n
        help
            Enable JTAG debug support in the system. When enabled,
            JTAG-related pins can either be set to default values for
            the current MCU or defined manually via custom pin entries.

    choice
        prompt "JTAG Pin Configuration Mode"
        depends on PSTAR_KCONFIG_JTAG_ENABLED
        default PSTAR_KCONFIG_JTAG_USE_DEFAULT

        config PSTAR_KCONFIG_JTAG_USE_DEFAULT
            bool "Use default JTAG pin configuration for MCU"
            help
                Automatically apply the standard JTAG pinout based
                on the selected MCU (ESP32, ESP32-S2, ESP32-S3).

        config PSTAR_KCONFIG_JTAG_USE_CUSTOM
            bool "Use custom JTAG pin configuration"
            help
                Manually specify custom GPIO pins for each JTAG signal.

    endchoice

    choice
        prompt "Target MCU for default JTAG pin mapping"
        depends on PSTAR_KCONFIG_JTAG_ENABLED && PSTAR_KCONFIG_JTAG_USE_DEFAULT
        default PSTAR_KCONFIG_JTAG_MCU_ESP32

        config PSTAR_KCONFIG_JTAG_MCU_ESP32
            bool "ESP32 (Classic)"
            help
                Use default pin mapping for ESP32:
                TCK=GPIO13, TMS=GPIO14, TDI=GPIO12, TDO=GPIO15

        config PSTAR_KCONFIG_JTAG_MCU_ESP32S2
            bool "ESP32-S2"
            help
                Use default pin mapping for ESP32-S2:
                TCK=GPIO39, TMS=GPIO40, TDI=GPIO41, TDO=GPIO42

        config PSTAR_KCONFIG_JTAG_MCU_ESP32S3
            bool "ESP32-S3"
            help
                Use default pin mapping for ESP32-S3:
                TCK=GPIO39, TMS=GPIO40, TDI=GPIO41, TDO=GPIO42

    endchoice

    config PSTAR_KCONFIG_JTAG_PIN_TCK
        int "Custom GPIO for TCK (Test Clock)"
        depends on PSTAR_KCONFIG_JTAG_ENABLED && PSTAR_KCONFIG_JTAG_USE_CUSTOM
        range 0 39
        default 13
        help
            Specify the GPIO number to use for the TCK (clock) signal.

    config PSTAR_KCONFIG_JTAG_PIN_TMS
        int "Custom GPIO for TMS (Test Mode Select)"
        depends on PSTAR_KCONFIG_JTAG_ENABLED && PSTAR_KCONFIG_JTAG_USE_CUSTOM
        range 0 39
        default 14
        help
            Specify the GPIO number to use for the TMS signal.

    config PSTAR_KCONFIG_JTAG_PIN_TDI
        int "Custom GPIO for TDI (Test Data In)"
        depends on PSTAR_KCONFIG_JTAG_ENABLED && PSTAR_KCONFIG_JTAG_USE_CUSTOM
        range 0 39
        default 12
        help
            Specify the GPIO number to use for the TDI signal.

    config PSTAR_KCONFIG_JTAG_PIN_TDO
        int "Custom GPIO for TDO (Test Data Out)"
        depends on PSTAR_KCONFIG_JTAG_ENABLED && PSTAR_KCONFIG_JTAG_USE_CUSTOM
        range 0 39
        default 15
        help
            Specify the GPIO number to use for the TDO signal.

endmenu
